/*
 * This build file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java Library project to get you started.
 * For more details take a look at the Java Libraries chapter in the Gradle
 * user guide available at https://docs.gradle.org/3.4/userguide/java_library_plugin.html
 */
apply plugin: 'java'
apply plugin: 'application'

repositories {
  mavenCentral()
}

sourceSets {
   main {
      java {
         srcDir 'src'
      }
   }
	
}

mainClassName = 'thesis.scxmlidl.main.Test'





dependencies {
  compile "org.antlr:antlr4:4.5.1" // use ANTLR version 4

}

task setHttpProxyFromEnv {
    def map = ['HTTP_PROXY': 'http', 'HTTPS_PROXY': 'https']
    for (e in System.getenv()) {
        def key = e.key.toUpperCase()
        if (key in map) {
            def base = map[key]
            def url = e.value.toURL()
            println " - systemProp.${base}.proxy=${url.host}:${url.port}"
            System.setProperty("${base}.proxyHost", url.host.toString())
            System.setProperty("${base}.proxyPort", url.port.toString())
        }
    }
}

build.dependsOn setHttpProxyFromEnv

jar {
  manifest {
    attributes 'Main-Class': 'thesis.scxmlidl.main.Test'
    attributes 'Class-Path': 'antlr-4.5.1-complete.jar'
  }
}